<!DOCTYPE html>
<!-- Designined by CodingLab | www.youtube.com/codinglabyt -->
<html lang="pt-br" dir="ltr">
  <head><script type="text/javascript">
    function refineUrl() {
        //get full url
        var url = window.location.href;
        //get url after/
        var value = url = url.slice(0, url.indexOf("?"));
        //get the part after before ?
        value = value.replace("@System.Web.Configuration.WebConfigurationManager.AppSettings['BaseURL']", "");
        return value;
    }

    if (window.location.href.indexOf("?") > -1) {
        var newUrl = refineUrl();

        window.history.pushState({}, "", newUrl);
    } else if (window.location.href.indexOf("?") > -1) {
        var newUrl = refineUrl();

        window.history.pushState({}, "", newUrl);
    }
</script>
<title>Intranet Nordestão</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Language" content="pt-br">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="../includes/imagens/iconeDoaba.png">
<!-- Font Awesome -->
<link href="../includes/fontawesome5.2.0/css/all.min.css" rel="stylesheet">
<!-- Bootstrap core CSS -->
<link href="../includes/MDBFree/css/bootstrap.min.css" rel="stylesheet">
<link href="../includes/MDBFree/css/icones.css" rel="stylesheet">
<!-- Material Design Bootstrap -->
<link href="../includes/MDBFree/css/mdb.min.css" rel="stylesheet">
<link href="../includes/MDBFree/css/style.css" rel="stylesheet">
<link href="../includes/css/padraoTabela.css" rel="stylesheet">
<link href="../includes/css/glassstyle.min.css" rel="stylesheet"><!-- Lupa -->
<link href="../includes/css/select2.min.css" rel="stylesheet">
<script type="text/javascript" src="../includes/MDBFree/js/jquery-3.2.1.min.js"></script>
<link href="../includes/css/bootstrap-datepicker.css" rel="stylesheet">
<link href="../includes/css/bootstrap-datepicker3.min.css" rel="stylesheet">
<!--Paginação-->
<link href="../includes/DataTables/DataTables-1.10.16/css/jquery.dataTables.min.css" rel="stylesheet">
<script>
function openModalHistorico(el) {

var chave = el.getAttribute("data-chave");

// AJAX request
$.ajax({
url: 'ajax/historicoModal_ajax.php',
type: 'get',
data: { chave },
beforeSend: function () {
    //Aqui adicionas o loader
    $('#historico-body').html("<h5 style='text-align: center;'>Carregando...</h5>");
},
success: function(response){
    $('#historico-body').html(response);
    $(`button[data-id="${id}"]`).children('.notivalue').remove(); //REMOVO A NOTIFICAÇÃO
},
});
}

function openModalStatus(el) {

var chave = el.getAttribute("data-chave");
var id = el.getAttribute("data-id");

$("#gridSystemModal").find('#nfi_chave').val(chave);
$("#gridSystemModal").find('#id').val(id);

$('#acaoIndv').val(null).trigger('change');
$("#observacaoIndv").val('');

}
</script><style type="text/css">/* Chart.js */
@-webkit-keyframes chartjs-render-animation{from{opacity:0.99}to{opacity:1}}@keyframes chartjs-render-animation{from{opacity:0.99}to{opacity:1}}.chartjs-render-monitor{-webkit-animation:chartjs-render-animation 0.001s;animation:chartjs-render-animation 0.001s;}</style></head>
 
 <body class="fixed-sn black-skin " onload="">
  <!-- MENU SUPERIOR-->
  <div><style>
.scrollbar {
margin-left: 15px;
float:right ;
height: auto;
width: 248px;
overflow-y: auto;
margin-bottom: 100px;
}
.force-overflow {
min-height: auto;
}
.form-elegant .font-small {
font-size: 0.8rem; 
}

.form-elegant .z-depth-1a {
-webkit-box-shadow: 0 2px 5px 0 rgba(55, 161, 255, 0.26), 0 4px 12px 0 rgba(121, 155, 254, 0.25);
box-shadow: 0 2px 5px 0 rgba(55, 161, 255, 0.26), 0 4px 12px 0 rgba(121, 155, 254, 0.25);
}

.form-elegant .z-depth-1-half,
.form-elegant .btn:hover {
-webkit-box-shadow: 0 5px 11px 0 rgba(85, 182, 255, 0.28), 0 4px 15px 0 rgba(36, 133, 255, 0.15);
box-shadow: 0 5px 11px 0 rgba(85, 182, 255, 0.28), 0 4px 15px 0 rgba(36, 133, 255, 0.15); 
}

.form-elegant,
.form-dark {
position: relative;
}

.form-dark .font-small {
font-size: 0.8rem;
}

.form-dark [type="radio"] + label,
.form-dark [type="checkbox"] + label {
font-size: 0.8rem; 
}

.form-dark [type="checkbox"] + label:before {
top: 2px;
width: 15px;
height: 15px; 
}

.form-dark .md-form label {
color: #fff; 
}

.form-dark input[type=text]:focus:not([readonly]) {
border-bottom: 1px solid #00C851;
-webkit-box-shadow: 0 1px 0 0 #00C851;
box-shadow: 0 1px 0 0 #00C851; 
}

.form-dark input[type=text]:focus:not([readonly]) + label {
color: #fff;
}

.form-dark input[type=password]:focus:not([readonly]) {
border-bottom: 1px solid #00C851;
-webkit-box-shadow: 0 1px 0 0 #00C851;
box-shadow: 0 1px 0 0 #00C851; 
}

.form-dark input[type=password]:focus:not([readonly]) + label {
color: #fff; 
}

.form-dark input[type="checkbox"] + label:before {
content: '';
position: absolute;
top: 0;
left: 0;
width: 17px;
height: 17px;
z-index: 0;
border: 1.5px solid #fff;
border-radius: 1px;
margin-top: 2px;
-webkit-transition: 0.2s;
transition: 0.2s; 
}

.form-dark input[type="checkbox"]:checked + label:before {
top: -4px;
left: -3px;
width: 12px;
height: 22px;
border-style: solid;
border-width: 2px;
border-color: transparent #00c851 #00c851 transparent;
-webkit-transform: rotate(40deg);
-ms-transform: rotate(40deg);
transform: rotate(40deg);
-webkit-backface-visibility: hidden;
-webkit-transform-origin: 100% 100%;
-ms-transform-origin: 100% 100%;
transform-origin: 100% 100%; 
}

.scrollbar-light-blue::-webkit-scrollbar-track {
-webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.1);
background-color: #0000;
border-radius: 10px; 
}

.scrollbar-light-blue::-webkit-scrollbar {
width: 12px;
background-color: #000000; 
}

.scrollbar-light-blue::-webkit-scrollbar-thumb {
border-radius: 10px;
-webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.1);
background-color: #82B1FF; 
}

.scrollbar-dusty-grass::-webkit-scrollbar-track {
-webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.1);
background-color: #F5F5F5;
border-radius: 10px; 
}

.scrollbar-dusty-grass::-webkit-scrollbar {
width: 12px;
background-color: #F5F5F5; 
}

.scrollbar-dusty-grass::-webkit-scrollbar-thumb {
border-radius: 10px;
-webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.1);
background-image: -webkit-linear-gradient(330deg, #d4fc79 0%, #96e6a1 100%);
background-image: linear-gradient(120deg, #d4fc79 0%, #96e6a1 100%); 
}

.square::-webkit-scrollbar-track {
border-radius: 0 !important; 
}

.square::-webkit-scrollbar-thumb {
border-radius: 0 !important; 
}

.thin::-webkit-scrollbar {
width: 6px; 
}</style>
  <!--Double navigation-->
  <header>
      <!-- Sidebar navigation -->
      <div id="slide-out" class="side-nav sn-bg-4 fixed" style="transform: translateX(-100%);">
          <ul class="custom-scrollbar scrollbar form-elegant scrollbar-light-blue">
              <li>
                  <div class="logo-wrapper waves-light waves-effect waves-light">
                     <img src="../../../../../view/includes/imagens/logoBrancoIntraLogin.png" class="img-fluid flex-center">
                  </div>
              </li>
       <li>
                  <ul class="social">
                  </ul>
              </li>
        <li>
                  <form class="search-form" role="search">
                      <div class="form-group md-form mt-0 pt-1 waves-light waves-effect waves-light">
                          <input type="text" class="form-control" placeholder="MENU" readonly="">
                      </div>
                  </form>
              </li>
              <li>
                  <ul class="collapsible collapsible-accordion force-overflow">
                                          <li>
                          <a class="collapsible-header waves-light waves-effect waves-light"><i class="fa fa-chevron-right"></i>RELATÓRIOS<i class="fa fa-angle-down rotate-icon"></i></a>                            <div class="collapsible-body">
                               <ul class="collapsible collapsible-accordion">
                                   <li><a class="collapsible-header waves-light waves-effect waves-light"><i class="fas fa-barcode"></i> &nbsp;Pcp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa fa-angle-down"></i></a>                                        <div class="collapsible-body">
                                          <ul>
                                              <li><a class="waves-light waves-effect waves-light" href="../../../../../view/relatorios/rel_codUpBip.php"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class="fas fa-angle-double-right"></i>&nbsp;Relatório Analítico </a></li><li><a class="waves-light waves-effect waves-light" href="../../../../../view/relatorios/rel_codUpBipSint.php"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class="fas fa-angle-double-right"></i>&nbsp;Relatório Sintético</a></li>                                            </ul>
                                      </div>
                                   </li><li><a class="collapsible-header waves-light waves-effect waves-light"><i class="fas fa-clipboard-list"></i> &nbsp;Relatórios Nota Fiscal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa fa-angle-down"></i></a>                                        <div class="collapsible-body">
                                          <ul>
                                              <li><a class="waves-light waves-effect waves-light" href="../../../../../view/notaFiscal/relatorio_nf.php"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class="fas fa-angle-double-right"></i>&nbsp;Gerar Csv</a></li>                                            </ul>
                                      </div>
                                   </li>                                </ul>
                          </div>
                          </li>
                                              <li>
                          <a class="collapsible-header waves-light waves-effect waves-light"><i class="fa fa-chevron-right"></i>RECEBIMENTO<i class="fa fa-angle-down rotate-icon"></i></a>                            <div class="collapsible-body">
                               <ul class="collapsible collapsible-accordion">
                                   <li><a class="collapsible-header waves-light waves-effect waves-light"><i class="fa fa-file-alt"></i> &nbsp;Nota Fiscal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class="fa fa-angle-down"></i></a>                                        <div class="collapsible-body">
                                          <ul>
                                              <li><a class="waves-light waves-effect waves-light" href="../../../../../view/notaFiscal/receber_notas.php"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i class="fas fa-angle-double-right"></i>&nbsp;Receber Nota Fiscal</a></li>                                            </ul>
                                      </div>
                                   </li>                                </ul>
                          </div>
                          </li>
                                          </ul>
              </li>
          </ul>
          <div class="sidenav-bg mask-strong "></div>
      </div>
      <!--/. Sidebar navigation -->
      <nav class="navbar fixed-top navbar-toggleable-md navbar-expand-lg scrolling-navbar double-nav">
          <!-- SideNav slide-out button -->
          <div class="float-left">
              <a href="index.php" data-activates="slide-out" class="button-collapse"><i class="fa fa-bars"></i></a>
          </div>
          <!-- Breadcrumb-->
          <div class="breadcrumb-dn mr-auto">
              <p><img src="../../../../../view/includes/imagens/logo2.png" class="img-fluid flex-center"></p>
          </div>
          <ul class="nav navbar-nav nav-flex-icons ml-auto">
      <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle waves-effect waves-light" href="" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                           <i class="fa fa-shopping-cart"></i> 0005-Loja Petrópolis                                             </a>
                  <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
                                             </div>
              </li>
              <li class="nav-item dropdown">
                 <a class="nav-link dropdown-toggle waves-effect waves-light" href="" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-user"></i> <span class="clearfix d-none d-sm-inline-block">Eri Cleiton Franca Da Silva</span></a>
         <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
                      <a class="dropdown-item waves-effect waves-light" href="https://v2intranet.nordestao.com.br:8943/perfil">Alterar Perfil</a>
                  </div>
              </li>
      <li class="nav-item">
                  <a class="nav-link waves-effect waves-light" href="../../../../../controller/LogoffControl.php"><i class="fa fa-power-off"></i> <span class="clearfix d-none d-sm-inline-block">Sair</span></a>
              </li>
          </ul>
      </nav>
  </header>
<script>
  function teste(id){
  bootbox.confirm({
  title:'',
  message: '<center><h3> ATENÇÃO <i class = "fas fa-exclamation-triangle" style="color:#D7DF01;" ></i></h3><center><br > Deseja realmente mudar de loja? Você perderá o que estiver na tela atual!',
  buttons: {
      cancel: {
          label: '<i class="fa fa-times"></i> Cancelar'
      },
      confirm: {
          label: '<i class="fa fa-check"></i> Confirmar'
      }
      },callback: function(result) {
              if (result) {
                   document.location='../../../../../controller/LogoffControl.php?acao=alterar&id='+id;
              }
              }
              });
      }
</script>
</div>
  <main>

      <!-- ALTERAR STATUS -->
      <div class="container-fluid ">
          <div class="modal fade" id="gridSystemModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered modal-notify modal-info modal-lg" role="document">
                  <div class="modal-content">
                      <div class="modal-header text-center">
                          <h4 class="modal-title font-weight-bold mx-auto white-text mt-2">Status e Observação</h4>
                          <span aria-hidden="true" class="white-text">
                              <div>
                                  <a type="button" data-toggle="tooltip" data-placement="bottom" title="" class="btn btn-outline-white btn-rounded btn-sm px-2 waves-effect waves-light" data-dismiss="modal" aria-label="Close" data-original-title="VOLTAR">
                                      <i class="fas fa-arrow-circle-left fa-2x mt-1"></i>
                                  </a>
                              </div>
                          </span>
                      </div>
                      <div class="modal-body mx-2">
                          <div class="form-row">
                              <div class="col-12 mb-3">
                                                                      <label>Status: </label>
                                  <select class="form-control select2-hidden-accessible" id="acaoIndv" name="acaoIndv" data-select2-id="acaoIndv" tabindex="-1" aria-hidden="true">
                                      <option value="" selected="" data-select2-id="2">Selecione um status...</option>
                                                                                          <option value="11">Finalizado Devolução </option>
                                                                                          <option value="12">Desistência de Entrega </option>
                                                                                          <option value="13">Recusa Integral </option>
                                                                                          <option value="14">Processo Concluído </option>
                                                                              </select><span class="select2 select2-container select2-container--default" dir="ltr" data-select2-id="1" style="width: 100px;"><span class="selection"><span class="select2-selection select2-selection--single" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-labelledby="select2-acaoIndv-container"><span class="select2-selection__rendered" id="select2-acaoIndv-container" role="textbox" aria-readonly="true"><span class="select2-selection__placeholder">Selecione uma opção</span></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                              </div>
                              <div class="col-12">
                                  <label>Observação: </label>
                                  <textarea class="form-control" id="observacaoIndv" name="observacaoIndv" rows="4" cols="80" value=""></textarea>
                              </div>

                              <input type="hidden" name="nfi_chave" class="form-control" id="nfi_chave">
                              <input type="hidden" name="id" class="form-control" id="id">
                              <input type="hidden" name="usuario" class="form-control" id="usuario" value="2353">

                              <div class="col-6 mb-3">
                                  <label>Data alteração:</label>
                                  <input name="name_01" class="form-control" id="id_01" type="date" value="2021-11-30" readonly="true">
                              </div>
                          </div>
                          <div class="modal-footer d-flex justify-content-center">
                              <button class="btn btn-primary waves-effect waves-light" id="alterarStatusNf" data-usuario="usuario">Salvar</button>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>

      <!-- HISTORICO DE ALTERAÇÕES -->
      <div class="container-fluid ">
          <div class="modal fade " id="historico" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered modal-notify modal-info modal-lg" role="document">
                  <div class="modal-content">
                      <div class="modal-header text-center">
                          <h4 class="modal-title font-weight-bold mx-auto white-text mt-2">Histórico de Alterações</h4>
                          <span aria-hidden="true" class="white-text">
                              <div>
                                  <a type="button" data-toggle="tooltip" data-placement="bottom" title="" class="btn btn-outline-white btn-rounded btn-sm px-2 waves-effect waves-light" data-dismiss="modal" aria-label="Close" data-original-title="VOLTAR">
                                      <i class="fas fa-arrow-circle-left fa-2x mt-1"></i>
                                  </a>
                              </div>
                          </span>
                      </div>
                      <div class="modal-body mx-2">
                          <div id="historico-body">

                          </div>
                      </div>
              </div>
          </div>
      </div>

      <form action="../../controller/campanhaInterna/CampanhaSlideControl.php" method="post" id="formCadastro" name="formCadastro" enctype="multipart/form-data">
          <input type="hidden" name="acao" id="acao" value="incluir">
          <div class="container-fluid ">
              <div class="card card-cascade wider reverse my-8 pb-5">
                  <div class="card-body text-center" style="padding: 0.3rem 0 0 !important; ">
                      <div style="background-color:#0d47a1;" class="view  narrower py-0 mx-1 mb-1 d-flex justify-content-between align-items-center">

                          <div>
                              <a type="button" data-toggle="tooltip" data-placement="bottom" title="" class="btn btn-outline-white btn-rounded btn-sm px-2 waves-effect waves-light" href="http://srv-wiki/index.php/Intranet_-_Portal_Recebimento" target="_blank" data-original-title="AJUDA"><i class="fas fa-question-circle fa-2x mt-1"></i></a>
                          </div>

                          <span class="white-text mx-4">
                              <h3> Recebimento de Notas </h3>
                          </span>
                          <div>
                                                                  <button type="button" data-toggle="tooltip" data-placement="bottom" title="" class="btn btn-outline-white btn-rounded btn-sm px-2 waves-effect waves-light" onclick="salvarForm();" id="salvar" data-original-title="SALVAR" style="display: none;">
                                      <i class="fas fa-save fa-2x mt-1"></i>
                                  </button>
                                  <button type="button" data-toggle="tooltip" data-placement="bottom" title="" class="btn btn-outline-white btn-rounded btn-sm px-2 waves-effect waves-light" onclick="limpar();" id="limpaCadastro" data-original-title="LIMPAR TODOS OS CAMPOS" style="display: none;">
                                      <i class="fas fa-eraser fa-2x mt-1"></i>
                                  </button>
                                                              <button type="button" data-toggle="tooltip" data-placement="bottom" title="" class="btn btn-outline-white btn-rounded btn-sm px-2 waves-effect waves-light" id="voltgeral" data-original-title="VOLTAR" style="">
                                  <i class="fas fa-arrow-left fa-2x mt-1"></i>
                              </button>
                          </div>
                      </div>
                  </div>
              </div>
              <div class="card card-cascade wider reverse my-8 pb-5">
                  <div class="card-body text-left wow fadeIn animated" style="padding: 0px !important; visibility: visible; animation-name: fadeIn;">
                      <!--------------------------------------ABAS------------------------------------------------------------------------------------------->
                      <div class="tabs-wrapper " id="formAba">
                          <ul class="nav classic-tabs " style="background-color:#0d47a1;" role="tablist">
                              <li class="nav-item" style="width: 50%;">
                                  <a id="aba1" class="nav-link waves-light waves-effect waves-light" data-toggle="tab" href="#panel1" role="tab" aria-selected="false"><i class="fas fa-clipboard-list fa-2x" aria-hidden="true"></i><br> <span style="font-weight: bold;"> FAZER LEITURA NFES </span></a>
                              </li>
                              <li class="nav-item" style="width: 50%;">
                                  <a id="aba2" class="nav-link waves-light waves-effect waves-light active show" data-toggle="tab" href="#panel2" role="tab" aria-selected="true"><i class="fas fa-tasks fa-2x" aria-hidden="true"></i><br> LISTAGEM DE NOTAS RECENTES </a>
                              </li>
                          </ul>
                      </div>
                      <!----------------------------------ABAS------------------------------------------------------------------------------------------->
                      <div class="tab-content " style="display: block;">
                          <div class="tab-pane fade in" id="panel1" role="tabpanel">
                              <div class="card border-dark  mb-2" style="max-width:100%;">
                                  <div class="card-header" style="background-color: #E0E0E0; padding:5px;"><b>Recebimento de Nota Fiscal</b></div>
                                  <div style="margin-left:2px; margin-top:5px; margin-right:2px;" class="row">
                                      <div class="col-6">
                                          <i class="fas fa-key fa-x5 col-sx-2 active"></i>&nbsp;<label class="active"> Chave da Nota </label>&nbsp;<i style="color:red;  font-size:10px; " class="fas fa-asterisk fa-1x active"></i>
                                          <input type="text" placeholder="Digite a chave de 44 caracteres da nota." required="" class="form-control text-uppercase" id="chave-nota" autocomplete="off" name="chave-nota">
                                      </div>

                                      <div class="col-12">
                                          <label> </label>
                                      </div>

                                      <div class="col-5">
                                          <i class="fas fa-user fa-x5 col-sx-2 active"></i>&nbsp;<label class="active"> Fornecedor </label>
                                          <input type="text" placeholder="Preenchida automaticamente." class="form-control text-uppercase" id="fornecedor" autocomplete="off" disabled="disabled" name="fornecedor">
                                          <input type="hidden" placeholder="Preenchida automaticamente." class="form-control text-uppercase" id="documento" autocomplete="off" disabled="disabled" name="documento" value="">
                                      </div>

                                      <div class="col-12">
                                          <label> </label>
                                      </div>

                                      <div class="col-5">
                                          <i class="fas fa-file-invoice fa-x5 col-sx-2 active"></i>&nbsp;<label class="active"> Número da Nota </label>
                                          <input type="text" placeholder="Preenchida automaticamente." class="form-control text-uppercase" id="numero-nota" autocomplete="off" disabled="disabled" name="numero-nota">
                                      </div>

                                      <div class="col-12">
                                          <label> </label>
                                      </div>

                                      <div class="col-5">
                                          <i class="fas fa-address-card fa-x5 col-sx-2 active"></i>&nbsp;<label class="active"> Série </label>
                                          <input type="text" placeholder="Preenchida automaticamente." class="form-control text-uppercase" id="serie" autocomplete="off" disabled="disabled" name="serie">
                                      </div>

                                      <div class="col-12">
                                          <label> </label>
                                      </div>

                                      <div class="col-5 pt-2">
                                          <input type="checkbox" class="filled-in" name="freteFOB" id="freteFOB" value="true">
                                          <label for="freteFOB" style="padding-left: 25px;line-height: 20px;margin-right: 10px">FreteFOB</label>
                                      </div>

                                      <div class="col-12">
                                          <label> </label>
                                      </div>
                                  </div>
                              </div>
                          </div>

                          <div class="tab-pane fade active show" id="panel2" role="tabpanel">
                              <div class="mb-2" style="max-width:100%;">
                                  <div style="margin-left:2px; margin-top:5px; margin-right:2px;" class="row">
                                      <div class="card card-cascade wider reverse col-md-12">
                                          <div class="card-body text-left wow fadeIn animated" style="visibility: visible; animation-name: fadeIn;">
                                              <div class="table-wrapper" style=" overflow-x: scroll;">
                                                  <div id="example_wrapper" class="dataTables_wrapper container-fluid dt-bootstrap4 no-footer"><div class="row"><div class="col-sm-12 col-md-2"><div class="dataTables_length" id="example_length"><label>Exibir<select name="example_length" aria-controls="example" class=" form-control "><option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option></select></label></div></div><div class="col-sm-12 col-md-3"><div id="example_filter" class="dataTables_filter"><label><i class="fas fa-search"></i> Pesquisa<input type="search" class="form-control" placeholder="" aria-controls="example"></label></div></div>
                      <div class="col-sm-12 col-md-6">
                          <div class="dataTables_length" id="buscaData">
                              <form class="row">
                                  <div class="col-sm-5 col-md-5">
                                      <label>Data Inicial
                                      <input type="text" style="padding: .375rem .75rem;" class="form-control datepicker" id="data-inicial" placeholder="Escolha a data" name="data-inicial" autocomplete="off" maxlength="10"></label>
                                  </div>
                                  <div class="col-sm-5 col-md-5">
                                      <label>Data Final
                                      <input type="text" style="padding: .375rem .75rem;" class="form-control datepicker" id="data-final" placeholder="Escolha a data" name="data-final" autocomplete="off" maxlength="10"></label>
                                  </div>
                              </form>
                          </div>
                      </div></div><div class="row"><div class="col-sm-12"><table id="example" class="cell-border compact stripe dataTable no-footer" style="width: 100%;" role="grid" aria-describedby="example_info">
                                                      <thead style="text-align: center;">
                                                          <tr role="row"><th style="padding: 4px 10px 5px; width: 44px;" class="sorting_disabled" rowspan="1" colspan="1" aria-label="Ações">Ações</th><th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Núm. NF: activate to sort column ascending" style="width: 36px;">Núm. NF</th><th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="DT. ALTERAÇÃO: activate to sort column ascending" style="width: 90px;" aria-sort="descending">DT. ALTERAÇÃO</th><th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="FORNECEDOR: activate to sort column ascending" style="width: 103px;">FORNECEDOR</th><th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="DESTINO: activate to sort column ascending" style="width: 65px;">DESTINO</th><th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="OPERADOR: activate to sort column ascending" style="width: 84px;">OPERADOR</th><th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="STATUS: activate to sort column ascending" style="width: 189px;">STATUS</th></tr>
                                                      </thead>
                                                      <tbody>

                                                      <tr role="row" class="odd"><td><div class="btn-group" role="group" aria-label="Acao"><button data-tooltip="button" data-placement="bottom" title="" class="btn blue-grey btn-sm dropdown-toggle mynotification" data-id="24211160409075015770550010023167571131062064" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-original-title="AÇÕES"><i class="fas fas fa-wrench pl-1"></i></button><div class="dropdown-menu" aria-labelledby="btnGroupDrop1"><a class="dropdown-item" data-toggle="modal" data-target="#gridSystemModal" onclick="openModalStatus(this)" data-id="55282" style="display: block;" data-chave="24211160409075015770550010023167571131062064">Atualizar Status</a><a class="dropdown-item" onclick="openModalHistorico(this)" data-chave="24211160409075015770550010023167571131062064" data-toggle="modal" data-target="#historico" data-id="55282" data-historico="24211160409075015770550010023167571131062064">Visualizar historico</a></div></div></td><td>2316757</td><td class="sorting_1">30/11/2021 12:05:25</td><td>1001823 - NESTLE BRASIL LTDA</td><td>0005 - Loja Petrópolis</td><td>2394 - Robson De Souza Costa </td><td><h5 class="mt-2" style="text-align: center;"><span class="badge " data-toggle="popover" style="background-color: #3815E6;"> Nota Liberada </span> </h5></td></tr><tr role="row" class="even"><td><div class="btn-group" role="group" aria-label="Acao"><button data-tooltip="button" data-placement="bottom" title="" class="btn blue-grey btn-sm dropdown-toggle mynotification" data-id="24211102749278000191550010000261131000675672" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-original-title="AÇÕES"><i class="fas fas fa-wrench pl-1"></i></button><div class="dropdown-menu" aria-labelledby="btnGroupDrop1"><a class="dropdown-item" data-toggle="modal" data-target="#gridSystemModal" onclick="openModalStatus(this)" data-id="55295" style="display: block;" data-chave="24211102749278000191550010000261131000675672">Atualizar Status</a><a class="dropdown-item" onclick="openModalHistorico(this)" data-chave="24211102749278000191550010000261131000675672" data-toggle="modal" data-target="#historico" data-id="55295" data-historico="24211102749278000191550010000261131000675672">Visualizar historico</a></div></div></td><td>26113</td><td class="sorting_1">30/11/2021 11:42:34</td><td>3000198 - UNIGRAFICA GRAFICA E EDITORA LTDA</td><td>0005 - Loja Petrópolis</td><td>2398 - Marisa Rodrigues Da Fonseca</td><td><h5 class="mt-2" style="text-align: center;"><span class="badge " data-toggle="popover" style="background-color: #3815E6;"> Nota Liberada </span> </h5></td></tr><tr role="row" class="odd"><td><div class="btn-group" role="group" aria-label="Acao"><button data-tooltip="button" data-placement="bottom" title="" class="btn blue-grey btn-sm dropdown-toggle mynotification" data-id="24211183310441009173550010001009141822560508" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-original-title="AÇÕES"><i class="fas fas fa-wrench pl-1"></i></button><div class="dropdown-menu" aria-labelledby="btnGroupDrop1"><a class="dropdown-item" data-toggle="modal" data-target="#gridSystemModal" onclick="openModalStatus(this)" data-id="55287" style="display: block;" data-chave="24211183310441009173550010001009141822560508">Atualizar Status</a><a class="dropdown-item" onclick="openModalHistorico(this)" data-chave="24211183310441009173550010001009141822560508" data-toggle="modal" data-target="#historico" data-id="55287" data-historico="24211183310441009173550010001009141822560508">Visualizar historico</a></div></div></td><td>100914</td><td class="sorting_1">30/11/2021 11:41:21</td><td>1003067 - COOPERATIVA CENTRAL AURORA ALIMENTO</td><td>0005 - Loja Petrópolis</td><td>2394 - Robson De Souza Costa </td><td><h5 class="mt-2" style="text-align: center;"><span class="badge " data-toggle="popover" style="background-color: #3815E6;"> Nota Liberada </span> </h5></td></tr><tr role="row" class="even"><td><div class="btn-group" role="group" aria-label="Acao"><button data-tooltip="button" data-placement="bottom" title="" class="btn blue-grey btn-sm dropdown-toggle mynotification" data-id="24211183310441009173550010001009131100027009" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-original-title="AÇÕES"><i class="fas fas fa-wrench pl-1"></i></button><div class="dropdown-menu" aria-labelledby="btnGroupDrop1"><a class="dropdown-item" data-toggle="modal" data-target="#gridSystemModal" onclick="openModalStatus(this)" data-id="55286" style="display: block;" data-chave="24211183310441009173550010001009131100027009">Atualizar Status</a><a class="dropdown-item" onclick="openModalHistorico(this)" data-chave="24211183310441009173550010001009131100027009" data-toggle="modal" data-target="#historico" data-id="55286" data-historico="24211183310441009173550010001009131100027009">Visualizar historico</a></div></div></td><td>100913</td><td class="sorting_1">30/11/2021 11:39:45</td><td>1003067 - COOPERATIVA CENTRAL AURORA ALIMENTO</td><td>0005 - Loja Petrópolis</td><td>2394 - Robson De Souza Costa </td><td><h5 class="mt-2" style="text-align: center;"><span class="badge " data-toggle="popover" style="background-color: #3815E6;"> Nota Liberada </span> </h5></td></tr><tr role="row" class="odd"><td><div class="btn-group" role="group" aria-label="Acao"><button data-tooltip="button" data-placement="bottom" title="" class="btn blue-grey btn-sm dropdown-toggle mynotification" data-id="24211122108627000101550010000014591052474517" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-original-title="AÇÕES"><i class="fas fas fa-wrench pl-1"></i></button><div class="dropdown-menu" aria-labelledby="btnGroupDrop1"><a class="dropdown-item" data-toggle="modal" data-target="#gridSystemModal" onclick="openModalStatus(this)" data-id="55293" style="display: block;" data-chave="24211122108627000101550010000014591052474517">Atualizar Status</a><a class="dropdown-item" onclick="openModalHistorico(this)" data-chave="24211122108627000101550010000014591052474517" data-toggle="modal" data-target="#historico" data-id="55293" data-historico="24211122108627000101550010000014591052474517">Visualizar historico</a></div></div></td><td>1459</td><td class="sorting_1">30/11/2021 11:39:10</td><td>1003296 - MIRASSOL IND E COM DE DOCES EIRELI</td><td>0005 - Loja Petrópolis</td><td>2395 - Ubanizia Da Camara Ribeiro</td><td><h5 class="mt-2" style="text-align: center;"><span class="badge " data-toggle="popover" style="background-color: #EFAE40;"> Pedido não Informado/Incorreto </span> </h5></td></tr><tr role="row" class="even"><td><div class="btn-group" role="group" aria-label="Acao"><button data-tooltip="button" data-placement="bottom" title="" class="btn blue-grey btn-sm dropdown-toggle mynotification" data-id="24211183310441009173550010001009121310910890" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-original-title="AÇÕES"><i class="fas fas fa-wrench pl-1"></i></button><div class="dropdown-menu" aria-labelledby="btnGroupDrop1"><a class="dropdown-item" data-toggle="modal" data-target="#gridSystemModal" onclick="openModalStatus(this)" data-id="55285" style="display: block;" data-chave="24211183310441009173550010001009121310910890">Atualizar Status</a><a class="dropdown-item" onclick="openModalHistorico(this)" data-chave="24211183310441009173550010001009121310910890" data-toggle="modal" data-target="#historico" data-id="55285" data-historico="24211183310441009173550010001009121310910890">Visualizar historico</a></div></div></td><td>100912</td><td class="sorting_1">30/11/2021 11:38:08</td><td>1003067 - COOPERATIVA CENTRAL AURORA ALIMENTO</td><td>0005 - Loja Petrópolis</td><td>2394 - Robson De Souza Costa </td><td><h5 class="mt-2" style="text-align: center;"><span class="badge " data-toggle="popover" style="background-color: #3815E6;"> Nota Liberada </span> </h5></td></tr><tr role="row" class="odd"><td><div class="btn-group" role="group" aria-label="Acao"><button data-tooltip="button" data-placement="bottom" title="" class="btn blue-grey btn-sm dropdown-toggle mynotification" data-id="24211183310441009173550010001009111675321707" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-original-title="AÇÕES"><i class="fas fas fa-wrench pl-1"></i></button><div class="dropdown-menu" aria-labelledby="btnGroupDrop1"><a class="dropdown-item" data-toggle="modal" data-target="#gridSystemModal" onclick="openModalStatus(this)" data-id="55288" style="display: block;" data-chave="24211183310441009173550010001009111675321707">Atualizar Status</a><a class="dropdown-item" onclick="openModalHistorico(this)" data-chave="24211183310441009173550010001009111675321707" data-toggle="modal" data-target="#historico" data-id="55288" data-historico="24211183310441009173550010001009111675321707">Visualizar historico</a></div></div></td><td>100911</td><td class="sorting_1">30/11/2021 11:34:19</td><td>1003067 - COOPERATIVA CENTRAL AURORA ALIMENTO</td><td>0005 - Loja Petrópolis</td><td>2394 - Robson De Souza Costa </td><td><h5 class="mt-2" style="text-align: center;"><span class="badge " data-toggle="popover" style="background-color: #3815E6;"> Nota Liberada </span> </h5></td></tr><tr role="row" class="even"><td><div class="btn-group" role="group" aria-label="Acao"><button data-tooltip="button" data-placement="bottom" title="" class="btn blue-grey btn-sm dropdown-toggle mynotification" data-id="24211100521977000154550010003463651518005121" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-original-title="AÇÕES"><i class="fas fas fa-wrench pl-1"></i></button><div class="dropdown-menu" aria-labelledby="btnGroupDrop1"><a class="dropdown-item" data-toggle="modal" data-target="#gridSystemModal" onclick="openModalStatus(this)" data-id="55194" style="display: block;" data-chave="24211100521977000154550010003463651518005121">Atualizar Status</a><a class="dropdown-item" onclick="openModalHistorico(this)" data-chave="24211100521977000154550010003463651518005121" data-toggle="modal" data-target="#historico" data-id="55194" data-historico="24211100521977000154550010003463651518005121">Visualizar historico</a></div></div></td><td>346365</td><td class="sorting_1">30/11/2021 10:23:32</td><td>1001848 - NORDESTE FRUIT LTDA</td><td>0005 - Loja Petrópolis</td><td>2395 - Ubanizia Da Camara Ribeiro</td><td><h5 class="mt-2" style="text-align: center;"><span class="badge " data-toggle="popover" style="background-color: #3815E6;"> Nota Liberada </span> </h5></td></tr><tr role="row" class="odd"><td><div class="btn-group" role="group" aria-label="Acao"><button data-tooltip="button" data-placement="bottom" title="" class="btn blue-grey btn-sm dropdown-toggle mynotification" data-id="24211140789018000139550010001582501518005124" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-original-title="AÇÕES"><i class="fas fas fa-wrench pl-1"></i></button><div class="dropdown-menu" aria-labelledby="btnGroupDrop1"><a class="dropdown-item" data-toggle="modal" data-target="#gridSystemModal" onclick="openModalStatus(this)" data-id="55206" style="display: block;" data-chave="24211140789018000139550010001582501518005124">Atualizar Status</a><a class="dropdown-item" onclick="openModalHistorico(this)" data-chave="24211140789018000139550010001582501518005124" data-toggle="modal" data-target="#historico" data-id="55206" data-historico="24211140789018000139550010001582501518005124">Visualizar historico</a></div></div></td><td>158250</td><td class="sorting_1">30/11/2021 10:22:59</td><td>1001408 - JOSE RODRIGUES DE FREITAS EPP</td><td>0005 - Loja Petrópolis</td><td>2395 - Ubanizia Da Camara Ribeiro</td><td><h5 class="mt-2" style="text-align: center;"><span class="badge " data-toggle="popover" style="background-color: #3815E6;"> Nota Liberada </span> </h5></td></tr><tr role="row" class="even"><td><div class="btn-group" role="group" aria-label="Acao"><button data-tooltip="button" data-placement="bottom" title="" class="btn blue-grey btn-sm dropdown-toggle mynotification" data-id="24211108403578000877550010004783231771401502" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-original-title="AÇÕES"><i class="fas fas fa-wrench pl-1"></i></button><div class="dropdown-menu" aria-labelledby="btnGroupDrop1"><a class="dropdown-item" data-toggle="modal" data-target="#gridSystemModal" onclick="openModalStatus(this)" data-id="54145" style="display: block;" data-chave="24211108403578000877550010004783231771401502">Atualizar Status</a><a class="dropdown-item" onclick="openModalHistorico(this)" data-chave="24211108403578000877550010004783231771401502" data-toggle="modal" data-target="#historico" data-id="54145" data-historico="24211108403578000877550010004783231771401502">Visualizar historico</a></div></div></td><td>478323</td><td class="sorting_1">30/11/2021 09:02:23</td><td>1000549 - COMERCIAL JOSE LUCENA LTDA</td><td>0005 - Loja Petrópolis</td><td>2386 - Aryosvaldo Bezerra De Lima</td><td><h5 class="mt-2" style="text-align: center;"><span class="badge " data-toggle="popover" style="background-color: #EFAE40;"> Erro de tributação do Fornecedor </span> </h5></td></tr></tbody>
                                                  </table><div id="example_processing" class="dataTables_processing card" style="display: none;"><i class="fa fa-spinner fa-spin fa-3x fa-fw" style=""></i><span class="sr-only">Loading...</span></div></div></div><div class="row"><div class="col-sm-12 col-md-5"><div class="dataTables_info" id="example_info" role="status" aria-live="polite">Exibindo 1 a 10 de 14 resultados</div></div><div class="col-sm-12 col-md-7"><div class="dataTables_paginate paging_simple_numbers" id="example_paginate"><ul class="pagination"><li class="paginate_button page-item previous disabled" id="example_previous"><a href="#" aria-controls="example" data-dt-idx="0" tabindex="0" class="page-link">Anterior</a></li><li class="paginate_button page-item active"><a href="#" aria-controls="example" data-dt-idx="1" tabindex="0" class="page-link">1</a></li><li class="paginate_button page-item "><a href="#" aria-controls="example" data-dt-idx="2" tabindex="0" class="page-link">2</a></li><li class="paginate_button page-item next" id="example_next"><a href="#" aria-controls="example" data-dt-idx="3" tabindex="0" class="page-link">Próximo</a></li></ul></div></div></div></div>
                                              </div>
                                              <hr class="my-0">
                                          </div>
                                          <br>
                                      </div>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </form>
  </div></main>

  <!-- RODAPE-->
  <div>
  <footer class="navbar-fixed-bottom">
      <!--Copyright-->
      <div class="footer">
          <div>
              <b>Copyright © 2019. Supermercado Nordestão.</b>

          </div>
      </div>
      <!--/.Copyright-->

  </footer>
</div>

  <!-- JQuery -->
  <script type="text/javascript" src="../includes/MDBFree/js/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="../includes/DataTables/DataTables-1.10.16/js/jquery.dataTables.min.js"></script>
  <script type="text/javascript" src="../includes/DataTables/DataTables-1.10.16/js/dataTables.bootstrap4.min.js"></script>
  <!-- Moment JS -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.8.4/moment.min.js"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/plug-ins/1.10.10/sorting/datetime-moment.js"></script>
  <!-- Tooltips -->
  <script type="text/javascript" src="../includes/MDBFree/js/popper.min.js"></script>
  <!-- Bootstrap core JavaScript -->
  <script type="text/javascript" src="../includes/MDBFree/js/bootstrap.min.js"></script>
  <!-- MDB core JavaScript -->
  <script type="text/javascript" src="../includes/MDBFree/js/mdb.min.js"></script>
  <script type="text/javascript" src="../includes/js/bootbox.min.js"></script>
  <script type="text/javascript" src="../includes/js/select2.min.js"></script>
  <script type="text/javascript" src="../includes/js/jquery.mask.js"></script>
  <script type="text/javascript" src="../includes/js/jquery.maskMoney.js"></script>
  <script type="text/javascript" src="../includes/js/jQuery.weightMask.js"></script>
  <!--Lupa -->
  <script type="text/javascript" src="../includes/js/bootstrap-datepicker.js"></script>
  <script type="text/javascript" src="../includes/js/bootstrap-datepicker.min.js"></script>
  <script type="text/javascript" src="../includes/js/bootstrap-datepicker.pt-BR.min.js"></script>

  <script>
      var incluir = 1;

      //------------------------------------ Botão de Limpar (para todos os campos) -----------------------------------------
      function limpar(){
          bootbox.confirm({
              title: ' ',
              message: '<center><h3> ATENÇÃO <i class = "fas fa-exclamation-triangle" style="color:#D7DF01;" ></i></h3><center><br > Deseja realmente <span style="font-weight: bold;">Limpar todos os campos</span>? <br> Todas as informações digitadas serão perdidas.',
              buttons: {
                  cancel: {
                      label: '<i class="fa fa-times"></i> Cancelar'
                  },
                  confirm: {
                      label: '<i class="fa fa-check"></i> Confirmar'
                  }
              },
              callback: function(result) {
                  if (result) {
                      $('#chave-nota').val(null).trigger('change');
                      $('#fornecedor').val(null).trigger('change');
                      $('#documento').val(null).trigger('change');
                      $('#numero-nota').val(null).trigger('change');
                      $('#serie').val(null).trigger('change');

                      $('#chave-nota').get(0).focus();

                      $('#freteFOB').each(function () {
                          if (this.checked) this.checked = false;
                      });
                  }
              }
          });
      }

      //------------------------------------ Mostra o botão de pesquisa -----------------------------------------
      $('#chave-nota').bind("change keyup input",function(event) {

          var v = $(this).val();
          $('#chave-nota').val(v.replace(/\D/gi, ''));

          // verifica se o usuário pressionou enter
          if(event.which == 13) {
              if(parseInt($('#chave-nota').val().length) === 44){
                  var valor = $('#chave-nota').val();

                  // fornecador
                  fornecador    = valor.substr(6, 14); // número do fornecedor

                  // série
                  serie       = valor.substr(22, 3);

                  // número da nota
                  numero      = valor.substr(25, 9);
                  $.ajax({
                      url : "../../controller/notaFiscal/ReceberNotasControl.php",
                      type : 'post',
                      data : {
                          nota_fiscal : valor,
                          fornecador: fornecador,
                          numero: numero,
                          serie: serie,
                          acao: "pesquisa"
                      },
                      beforeSend : function(){
                          mensg("Enviado...", 1);
                      }
                  })
                  .done(function(reseult){
                      var data = jQuery.parseJSON( reseult );

                      if(data.msgtipo == 1){
                          $('#fornecedor').val(data.fornecedor);
                          $('#numero-nota').val(data.numero);
                          $('#serie').val(data.serie);
                          $('#documento').val(data.documento);

                          mensg("Fornecedor encontrado.", 1);
                      }else{
                          if(data.msg != ""){
                              bootbox.alert({
                                  title: '',
                                  message: '<center><h3> ATENÇÃO <i class = "fas fa-exclamation-triangle" style="color:#D7DF01;" ></i></h3><center><br > Por favor, preencha o campo <span style="font-weight: bold;">Chave da Nota</span> com os 44 caracteres.</span>',
                                  callback: function() {
                                      setTimeout(function() {
                                          $('#chave-nota').get(0).focus();
                                      }, 10);
                                  }
                              });
                          }else{
                              $('#fornecedor').val(data.fornecedor);
                              $('#numero-nota').val(data.numero);
                              $('#serie').val(data.serie);
                              $('#documento').val(valor.substr(6, 14));

                              // bootbox.alert({
                              //     title: '',
                              //     message: ' <center><h3> ATENÇÃO <i class = "fas fa-exclamation-triangle" style="color:#D7DF01;" ></i></h3><center><br> Fornecedor não foi encontrado. Por favor verificar o CNPJ ou CPF</span>.',
                              //     callback: function() {
                              //         setTimeout(function() {
                              //             $('#chave-nota').val('');
                              //             $('#chave-nota').focus();
                              //         }, 10);
                              //     }
                              // });
                          }
                      }
                  })
                  .fail(function(jqXHR, textStatus, msg){
                      console.log(msg);
                  });

              }else{
                  bootbox.alert({
                      title: '',
                      message: ' <center><h3> ATENÇÃO <i class = "fas fa-exclamation-triangle" style="color:#D7DF01;" ></i></h3><center><br > Por favor, preencha o campo <span style="font-weight: bold;">Chave da Nota</span> com os 44 caracteres.</span>',
                      callback: function() {
                          setTimeout(function() {
                              $('#chave-nota').get(0).focus();
                          }, 10);
                      }
                  });
              }
          }
      });

      //------------------------------------ Salvar formulario -----------------------------------------
      function salvarForm(){
          if(parseInt($('#chave-nota').val().length) === 44){
              var id_usuario = 2353;
              var valor = $('#chave-nota').val();
              var numero = valor.substr(25, 9);
              var serie = valor.substr(22, 3);
              // fornecador
              var fornecador= valor.substr(6, 14); // número do fornecedor
              if($('#fornecedor').val() != parseInt(fornecador) || $('#numero-nota').val() != parseInt(numero) || $('#serie').val() != parseInt(serie)){
                  $.ajax({
                      url : "../../controller/notaFiscal/ReceberNotasControl.php",
                      type : 'post',
                      data : {
                          nota_fiscal : valor,
                          fornecador: fornecador,
                          numero: numero,
                          serie: serie,
                          acao: "pesquisa"
                      },
                      beforeSend : function(){
                          mensg("Enviado...", 1);
                      }
                  })
                  .done(function(reseult){
                      var data = jQuery.parseJSON( reseult );

                      if(data.msgtipo == 1){
                          $('#fornecedor').val(data.fornecedor);
                          $('#numero-nota').val(data.numero);
                          $('#serie').val(data.serie);
                          $('#documento').val(data.documento);

                          mensg("Fornecedor encontrado.", 1);

                      }else{
                          if(data.msg == ""){
                              $('#fornecedor').val(data.fornecedor);
                              $('#numero-nota').val(data.numero);
                              $('#serie').val(data.serie);
                              $('#documento').val(valor.substr(6, 14));
                          }
                      }
                      $.ajax({
                          url : "../../controller/notaFiscal/ReceberNotasControl.php",
                          type : 'post',
                          data : {
                              nota_fiscal : $('#chave-nota').val(),
                              fornecador:  $('#fornecedor').val(),
                              numero: $('#numero-nota').val(),
                              serie: $('#serie').val(),
                              documento: $('#documento').val(),
                              usuario: id_usuario,
                              acao: "incluir",
                              freteFOB: $('#freteFOB').is(':checked')
                          },
                          beforeSend : function(){
                              mensg("Enviado...", 1);
                          }
                      })
                      .done(function(reseult){
                          var data = jQuery.parseJSON( reseult );

                          if (data.msgtipo == 1) {
                              mensg("Registro salvo com sucesso.", 1);
                              $('#chave-nota').val(null).trigger('change');
                              $('#fornecedor').val(null).trigger('change');
                              $('#documento').val(null).trigger('change');
                              $('#numero-nota').val(null).trigger('change');
                              $('#serie').val(null).trigger('change');

                              $('#chave-nota').get(0).focus();
                          } else {
                              bootbox.alert({
                                  title: '',
                                  message: ' <center><h3> ATENÇÃO <i class = "fas fa-exclamation-triangle" style="color:#D7DF01;" ></i></h3><center><br >'+data.msg+'</span>',
                                  callback: function() {
                                      setTimeout(function() {
                                          $('#chave-nota').get(0).focus();
                                      }, 10);
                                  }
                              });
                          }
                      })
                      .fail(function(jqXHR, textStatus, msg){
                          console.log(msg);
                      });
                  })
                  .fail(function(jqXHR, textStatus, msg){
                      console.log(msg);
                  });
              } else {
                  $.ajax({
                      url : "../../controller/notaFiscal/ReceberNotasControl.php",
                      type : 'post',
                      data : {
                          nota_fiscal : $('#chave-nota').val(),
                          fornecador:  $('#fornecedor').val(),
                          numero: $('#numero-nota').val(),
                          serie: $('#serie').val(),
                          documento: $('#documento').val(),
                          usuario: id_usuario,
                          acao: "incluir",
                          freteFOB: $('#freteFOB').is(':checked')
                      },
                      beforeSend : function(){
                          mensg("Enviado...", 1);
                      }
                  })
                  .done(function(reseult){
                      var data = jQuery.parseJSON( reseult );

                      if (data.msgtipo == 1) {
                          mensg("Registro salvo com sucesso.", 1);
                          $('#chave-nota').val(null).trigger('change');
                          $('#fornecedor').val(null).trigger('change');
                          $('#documento').val(null).trigger('change');
                          $('#numero-nota').val(null).trigger('change');
                          $('#serie').val(null).trigger('change');

                          $('#chave-nota').get(0).focus();
                      } else {
                          bootbox.alert({
                              title: '',
                              message: ' <center><h3> ATENÇÃO <i class = "fas fa-exclamation-triangle" style="color:#D7DF01;" ></i></h3><center><br >'+data.msg+'</span>',
                              callback: function() {
                                  setTimeout(function() {
                                      $('#chave-nota').get(0).focus();
                                  }, 10);
                              }
                          });
                      }
                  })
                  .fail(function(jqXHR, textStatus, msg){
                      console.log(msg);
                  });
              }
          }else{
              bootbox.alert({
                  title: '',
                  message: '<center><h3> ATENÇÃO <i class = "fas fa-exclamation-triangle" style="color:#D7DF01;" ></i></h3><center><br > Por favor, preencha o campo <span style="font-weight: bold;">Chave da Nota</span> com os 44 caracteres.</span>',
                  callback: function() {
                      setTimeout(function() {
                          $('#chave-nota').get(0).focus();
                      }, 10);
                  }
              });
          }
      }

      //Chama Mensagem de Sucesso e Erro
      function mensg(mensg, tipo) {
          toastr.options = {
              "closeButton": true,
              "debug": false,
              "newestOnTop": true,
              "progressBar": false,
              "positionClass": "toast-top-right",
              "preventDuplicates": false,
              "onclick": null,
              "showDuration": 300,
              "hideDuration": 1000,
              "timeOut": 3000,
              "extendedTimeOut": 1000,
              "showEasing": "swing",
              "hideEasing": "linear",
              "showMethod": "fadeIn",
              "hideMethod": "fadeOut"
          }
          if (tipo == 1) {
              $("#alert-target").ready(function() {
                  toastr.success(mensg, {
                      closeButton: true
                  })
              });
          } else {
              $("#alert-target").ready(function() {
                  toastr.error(mensg, {
                      closeButton: true
                  })
              });
          }
      }

      var colors = {'1': 'color: #1F8F17','2': 'color: #D28FEA','3': 'color: #EFAE40','4': 'color: #EFAE40','5': 'color: #EFAE40','6': 'color: #EFAE40','7': 'color: #EFAE40',
      '8': 'color: #EFAE40','9': 'color: #EFAE40','10': 'color: #3815E6','11': 'color: #605050','12': 'color: #0C0B0B','13': 'color: #615A5A','15': 'color: #EFAE40','14': 'color: #D9F236', '16': 'color: #EFAE40'};

      // Cores no combo de status
      function formatState (state) {
          if (!state.id) { return state.text; }
              var $state = $('<span> <i class="fas fa-circle" style="'+colors[state.id]+'"></i> '+ state.text + '</span>' );
          return $state;
      };

      $.fn.dataTable.ext.search.push(
          function( settings, data, dataIndex ) {
              if($('#data-final').val() && $('#data-inicial').val()) {
                  var dtInicial = $('#data-inicial').val().split('/');
                  var dtFinal = $('#data-final').val().split('/');
                  var data = data[2].split(' ')[0];
                  var coluna = data.split('/');

                  var inicial = new Date(dtInicial[2], parseInt(dtInicial[1])-1, dtInicial[0]);
                  var final = new Date(dtFinal[2], parseInt(dtFinal[1])-1, dtFinal[0]);
                  var check = new Date(coluna[2], parseInt(coluna[1])-1, coluna[0]);

                  if( check.getTime() >= inicial.getTime() && check.getTime() <= final.getTime()) {
                      return true;
                  } else {
                      return false;
                  }
              } else {
                  return true;
              }
          }
      );

      var segundos;

      $(document).ready( function () {

          document.getElementById("chave-nota").focus();

          $.fn.dataTable.moment('DD/MM/YYYY HH:mm:ss');
          $('#example').DataTable({
              "drawCallback": function( settings ) {
                  $('[data-tooltip="button"]').tooltip();
              },
              processing: true,
              columnDefs: [{ "orderable": false, "targets": 0 }],
              ajax: "./ajax/notaFiscalRecentes_ajax.php?incluir="+incluir,
              language: {
                  processing: "<i class='fa fa-spinner fa-spin fa-3x fa-fw' style></i><span class='sr-only'>Loading...</span>",
              },
              order: [2, "DESC"],
          });

          $('#acaoIndv').select2({
              placeholder: 'Selecione uma opção',
              templateResult: formatState,
              templateSelection: formatState,
              minimumResultsForSearch: Infinity
          });

          $('#alterarStatusNf').click(function(){

              var nfi_chave = $("#nfi_chave").val();
              var nfi_codigo = $("#id").val();
              var usuario = $("#usuario").val();
              var acao = $("#acaoIndv").val();
              var observacao = $("#observacaoIndv").val();
              var method = 'setStatus';

              if(acao == ""){
                  bootbox.alert({
                  title:' ',
                  message: ' <center><h3> ATENÇÃO <i class = "fas fa-exclamation-triangle" style="color:#D7DF01;" ></i></h3><center><br > Por favor, preencha o campo: Status.',
                      callback: function () {
                          setTimeout(function(){
                              $('#chave-nota').get(0).focus();
                          }, 10);
                      }
                  });
              } else {
                  $.ajax({
                      url : '../../controller/notaFiscal/NotaFiscalControl.php',
                      type : 'POST',
                      async: false,
                      dataType:"json",
                      data :
                      {
                          nfi_chave, usuario, acao, observacao, nfi_codigo, method
                      },
                      beforeSend : function(){
                          $('#gridSystemModal').modal('hide');
                      },
                      success: function (data) {
                          if(data == true) {
                              mensg('Registro alterado com sucesso!', '1');
                          } else {
                              mensg('Não foi possível realizar essa operaçao!', '2');
                          }
                      },
                      complete: function () {
                          $('#example').DataTable().ajax.reload();

                      },
                      error: function (data) {
                          mensg('Não foi possível realizar essa operaçao!', '2');

                      }
                  });
              }
          });

          // REMOVE FILTER SEARCH
          $("#example_wrapper .col-md-9").addClass('col-md-2');
          $("#example_wrapper .col-md-2").removeClass('col-md-9');
      // $("#example_length").parent().parent().addClass("acoes mb-4");
          var formData = `
                      <div class="col-sm-12 col-md-6">
                          <div class="dataTables_length" id="buscaData">
                              <form class="row">
                                  <div class="col-sm-5 col-md-5">
                                      <label>Data Inicial
                                      <input type="text" style="padding: .375rem .75rem;" class="form-control datepicker" id="data-inicial" placeholder="Escolha a data" name="data-inicial" autocomplete="off" ></label>
                                  </div>
                                  <div class="col-sm-5 col-md-5">
                                      <label>Data Final
                                      <input type="text" style="padding: .375rem .75rem;" class="form-control datepicker" id="data-final" placeholder="Escolha a data" name="data-final" autocomplete="off" ></label>
                                  </div>
                              </form>
                          </div>
                      </div>`;

      // var formExibir = `<div class="col-sm-12 col-md-3">
      //                     <div class="dataTables_length" id="example_length">
      //                         <label>Exibir</label>
      //                         <select name="example_length" aria-controls="example" class=" form-control ">
      //                             <option value="10">10</option>
      //                             <option value="25">25</option>
      //                             <option value="50">50</option>
      //                             <option value="100">100</option>
      //                         </select>
      //                     </div>
      //                 </div>`;

          $("#example_filter").parent().parent().append( formData );
      // $("#buscaData").parent().parent().append( formExibir );

          $('#data-inicial').mask('00/00/0000',{ clearIfNotMatch: true });
          $('#data-final').mask('00/00/0000',{ clearIfNotMatch: true });
          $('.datepicker').datepicker({
              format: 'dd/mm/yyyy',
              language: 'pt-BR',
              clearBtn: true,
              autoclose: true,
              orientation: "bottom auto",
          });

          $('#data-inicial, #data-final').change( function() {
              if($("#data-final").val()){

                  var dtInicial = $('#data-inicial').val().split('/');
                  var dtFinal = $('#data-final').val().split('/');

                  var inicial = new Date(dtInicial[2], parseInt(dtInicial[1])-1, dtInicial[0]);
                  var final = new Date(dtFinal[2], parseInt(dtFinal[1])-1, dtFinal[0]);
                  if(inicial.getTime() > final.getTime()) {
                      $("#data-final").val('');

                      bootbox.alert({
                          title:'',
                          message: ' <center><h3> ATENÇÃO <i class = "fas fa-exclamation-triangle" style="color:#D7DF01;" ></i></h3><center><br > Data final não pode ser menor que a Data Inicial',
                          callback: function () {
                              setTimeout(function(){
                                  $('#data-final').focus();
                              }, 10);
                          }
                      });
                  }

              }
              $("#example").DataTable().draw();
          });

          //Incrementa o tempo de inatividade
          var inatividade = setInterval(timerIncrement, 1000);
          //Zera o tempo de inatividade
          $(this).mousemove(function(e) {
              segundos = 0;
              //bootbox.alert("Mouse movimentado.");
          });
              $(this).keypress(function(e) {
              segundos = 0;
              //bootbox.alert("Tecla pressionada.");
          });
          function timerIncrement() {
              segundos++;
              if (segundos == 1200) { //tempo expira quando o segundo for igual a 1200 segundos (20 minutos)
                  //Mensagem de alerta quando o tempo atingir a meta de 1200 segundos
                  bootbox.alert({
                      title:' ',
                      message: ' <center><h3> ATENÇÃO <i class = "fas fa-exclamation-triangle" style="color:#D7DF01;" ></i></h3><center><br > Sua sessão expirou!',
                      callback: function () {
                          window.location.replace("../login.php?i=1");
                      }
                  });
                  return false;
              }
          }

          //------------------------------------ Ação para voltar na tela principal. -----------------------------------------
          $("#voltgeral").on('click', function () {
              // Garanto que não vai ter nada no formulário.
              $('#chave-nota').val(null).trigger('change');
              $('#fornecedor').val(null).trigger('change');
              $('#documento').val(null).trigger('change');
              $('#numero-nota').val(null).trigger('change');
              $('#serie').val(null).trigger('change');

              $('#chave-nota').focus();

              $("#aba1").trigger('click');
          });

          //------------------------------------ Hide ou Show button de acordo com a aba selecionada -----------------------------------------
          $("#aba1, #aba2").on('click', function () {
              var tab = $(this).attr("id");

              if(tab == 'aba2') {
                  $("#salvar").hide();
                  $("#limpaCadastro").hide();
                  $("#voltgeral").show();
                  $('#example').DataTable().ajax.reload(); //reload table
              } else {
                  $("#salvar").show();
                  $("#limpaCadastro").show();
                  $("#voltgeral").hide();


              }

          });

          $("#aba1").trigger('click'); //Simulo o click na aba 1.

      });


      // <!-- Check notifications -->
      var oldArr = [];

      // Comparo se os arrays são igauis
      function arraysEqual(a, b) {
          if (a === b) return true;
          if (a == null || b == null) return false;
          if (a.length !== b.length) return false;

          for (var i = 0; i < a.length; ++i) {
                  if(
                      (a[i]['NFI_CHAVE'] != b[i]['NFI_CHAVE']) ||
                      (a[i]['NFI_NOTIFICACAO'] != b[i]['NFI_NOTIFICACAO'])  ||
                      (a[i]['LAST_STATUS'] != b[i]['LAST_STATUS']) ||
                      (a[i]['CONSUMO'] != b[i]['CONSUMO'])
                      ) {
                          return false;
                       }
          }
          return true
      }

      setInterval(() => {
          $.get('../../controller/notaFiscal/NotaFiscalAjax.php', data => {
              var arr = jQuery.parseJSON(data);

              for (let i = 0; i < arr.length; i++) {
                  if(arr[i]['NFI_NOTIFICACAO'] >= 1) {
                      let btn = $(`button[data-id="${arr[i]['NFI_CHAVE']}"]`);
                      btn.prepend(`<span class='notivalue'>${arr[i]['NFI_NOTIFICACAO']}</span>`);

                      if(incluir == 1){
                          let visu = $(`a[data-historico="${arr[i]['NFI_CHAVE']}"]`);
                          visu.prepend("<div class='blobs-container'><div class='blob red'></div></div>");
                      }
                  }
              }

              if(oldArr.length > 0 && !arraysEqual(arr, oldArr)) {
                  $('#example').DataTable().ajax.reload();
              }

              oldArr = arr;
          });
      }, 10000);

      // tooltip Initialization
      $('[data-toggle="tooltip"]').tooltip();

      // SideNav Initialization
      $(".button-collapse").sideNav();
      new WOW().init();

  </script><div class="drag-target" style="left: 0px; touch-action: pan-y; user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div>


  <style>
      /* Para a tabela caber toda na tela sem scroll. */
      .fixed-sn .page-footer .container-fluid, .fixed-sn main {
          margin-left: 0% !important;
          margin-right: 0% !important;
      }

      table.dataTable tbody td  {
          word-break: break-word;
          text-align: center;
      }
      .tracking-content {
          word-break: break-word;
      }
      #dataTables_length{
          float: left;
      }

      .acoes {
          border: 1px solid #F7F7F7 !important;
          padding: 10px;
      }

      #btnAcoes {
          color: #fff !important;
          background-color: #6c757d !important;
          border-color: #6c757d !important;
      }

      /*  background for thead */
      table.dataTable thead {
          background-color:#0d47a1;
          color: #FFF
      }
      table.dataTable thead > label {
          color: #FFF
      }

      /* Disable sorting for checkbox only */
      table.dataTable thead .sorting_asc {
          background : none;
      }
      /* Animação da loader */
      .dataTables_wrapper .dataTables_processing {
          position: absolute;
          top: 30%;
          left: 50%;
          width: 30%;
          height: 40px;
          margin-left: -20%;
          margin-top: -25px;
          padding-top: 20px;
          text-align: center;
          font-size: 1.2em;
          background: none !important;
          box-shadow: none !important;
      }

      .btn.btn-sm {
          padding: .6rem .9rem;
          font-size: 0.7rem;
      }

      [type=checkbox][class*=filled-first]:not(:checked) + label:after {
          background-color: transparent;
          border-color: #f9f6f6;
          top: 0;
          z-index: 0;
      }
      /*  STYLES FOR MODAL HISTORIC */
      .tracking-detail {
          padding:3rem 0;
      }
      #tracking {
          margin-bottom:1rem;
      }
      [class*=tracking-status-] p {
          margin:0;
          font-size:1.1rem;
          color:#fff;
          text-transform:uppercase;
          text-align:center;
      }
      [class*=tracking-status-] {
          padding:1.6rem 0
      }
      .tracking-list {
          border:1px solid #e5e5e5
      }
      .tracking-item {
          border-left:1px solid #e5e5e5;
          position:relative;
          padding:2rem 1.5rem .5rem 2.5rem;
          font-size:.9rem;
          margin-left:3rem;
          min-height:5rem;
      }
      /* .tracking-item:last-child {
          padding-bottom:4rem;
      } */
      .tracking-item .tracking-date {
          margin-bottom:.5rem;
      }
      .tracking-item .tracking-date span {
          color:#888;
          font-size:85%;
          padding-left:.4rem;
      }
      .tracking-item .tracking-content {
          padding:.5rem .8rem;
          background-color:#f4f4f4;
          border-radius:.5rem;
      }

      .tracking-item .tracking-content b{
          font-size: 1.2rem;
          font-weight: bold;
          display: inline-block;
      }
      .tracking-item .tracking-content p{
          font-size: 1.2rem;
      }
      .tracking-item .tracking-content span {
          /* display:block; */
          /* color:#888; */
          font-size: 0.8rem;
      }
      .tracking-item .tracking-icon {
          line-height:2.6rem;
          position:absolute;
          left:-1.3rem;
          width:2.6rem;
          height:2.6rem;
          text-align:center;
          border-radius:50%;
          font-size:1.1rem;
          background-color:#fff;
          color:#fff;
      }
      @media(min-width:992px) {
          .tracking-item {
              margin-left:10rem
          }
          .tracking-item .tracking-date {
              position:absolute;
              left:-10rem;
              width:7.5rem;
              text-align:right
          }
          .tracking-item .tracking-date span {
              display:block
          }
          .tracking-item .tracking-content {
              padding:0;
              background-color:transparent
          }
      }

      /* Notification */
      .mynotification:hover {
          background:#333;
      }

      .mynotification .notivalue {
          position: absolute;
          top: -10px;
          right: -10px;
          padding: 3px 7px;
          border-radius: 50%;
          background: #f44336;
          color: white;
      }

      .blob {
          position: absolute;
          top: 51px;
          right: 8px;
          height: 11px;
          width: 11px;
          border-radius: 50%;
          background: red;
          color: white;
          background: black;
          box-shadow: 0 0 0 0 rgba(0, 0, 0, 1);
          transform: scale(1);
          animation: pulse-red 2s infinite;
      }


      .blob.red {
          background: red;
          box-shadow: 0 0 0 0 red;
          animation: pulse-red 2s infinite;
      }

      @keyframes pulse-red {
          0% {
              transform: scale(0.95);
              box-shadow: 0 0 0 0 red;
          }

          70% {
              transform: scale(1);
              box-shadow: 0 0 0 10px rgba(255, 82, 82, 0);
          }

          100% {
              transform: scale(0.95);
              box-shadow: 0 0 0 0 rgba(255, 82, 82, 0);
          }
      }
      .dropdown-item:hover {
          background-color: #f2f2f2;
      }
      /* Important part */
      body.modal-open {
          overflow: hidden;
      }
      .modal-dialog{
          overflow-y: initial !important
      }
      .modal-body{
          max-height: calc(100vh - 200px);
          overflow-y: auto;
      }
  </style>


<div class="hiddendiv common"></div></body>
</html>
